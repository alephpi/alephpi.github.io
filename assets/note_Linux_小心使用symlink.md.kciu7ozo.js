import{_ as t,c as s,ao as o,o as a}from"./chunks/framework.n-91xA-b.js";const p=JSON.parse('{"title":"小心使用符号链接 (symlink)","description":"","frontmatter":{"title":"小心使用符号链接 (symlink)","date":"2024-04-10T09:12:02.047Z","length":"463字","time":"2分钟","aside":true,"hash":-43611444},"headers":[],"relativePath":"note/Linux/小心使用symlink.md","filePath":"note/Linux/小心使用symlink.md"}'),i={name:"note/Linux/小心使用symlink.md"};function l(r,e,n,c,m,d){return a(),s("div",null,e[0]||(e[0]=[o('<p>今天在玩 symlink 的时候，遇到一点小问题，不过具体涉及到一些智熄操作我就不叙述如何复现它了。总之，我创建了一个符号链接，然后在本地和远程文件夹之间小小的腾挪了一下，结果当我想删除这个符号链接以后，发现删不掉了。我在本地<code>ls -l</code>返回的结果是</p><div class="danger custom-block"><p class="custom-block-title">ls: 无法访问&#39;xxx&#39;：没有那个文件或目录</p><p>?????????? ? ? ? ? ? xxx</p></div><p>矛盾得很，ls 能显示它的存在，但是却说它不存在。我问 claude，它怀疑是这个文件的 metadata 损坏了，所以造成了一堆问号。最后我是在远程<code>rm</code>掉的。</p><p>但在处理这个问题的时候，我倒是收获了一些别的关于 symlink 的知识。最重要的是关于 <a href="https://unix.stackexchange.com/questions/62502/if-i-rm-rf-a-symlink-will-the-data-the-link-points-to-get-erased-too" target="_blank" rel="noreferrer">删除 symlink 是否会影响链接对象</a> 的问题。 总而言之：</p><ul><li><code>rm symlink</code>只会删除符号链接，而</li><li><code>rm symlink/</code>则会删除符号链接指向的东西 于是</li><li><code>rm -r symlink</code>只会删除符号链接，而</li><li><code>rm -r symlink/</code>则会删除符号链接指向的东西，如果指向的是一个文件夹，那么就会删除那个文件夹中所有的文件 微妙的是，如果文件夹中还包含符号链接呢？ 答案是<code>rm</code>只会把这个符号链接当成一个文件删除，而不像一般的子文件夹一样会进入并删除里面的东西。 具体操作还是要小心，如果不放心，可以为<code>rm</code><a href="https://superuser.com/questions/382407/best-practices-to-alias-the-rm-command-and-make-it-safer" target="_blank" rel="noreferrer">套上一层安全检查</a>，检查待删除的目标中是否包含了符号链接指向的东西。</li></ul>',5)]))}const k=t(i,[["render",l]]);export{p as __pageData,k as default};
