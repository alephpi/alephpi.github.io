import{_ as t,c as r,ap as a,o as i}from"./chunks/framework.CCxIPCIe.js";const f=JSON.parse('{"title":"文件系统","description":"","frontmatter":{"title":"文件系统","date":"2023-03-29T22:00:00.000Z","length":"2443字","time":"9分钟","aside":true,"hash":-169313742},"headers":[],"relativePath":"note/Linux/文件系统.md","filePath":"note/Linux/文件系统.md"}'),o={name:"note/Linux/文件系统.md"};function d(n,e,s,l,c,p){return i(),r("div",null,e[0]||(e[0]=[a(`<h2 id="一切皆文件" tabindex="-1">一切皆文件 <a class="header-anchor" href="#一切皆文件" aria-label="Permalink to &quot;一切皆文件&quot;">​</a></h2><p>之前一直听过这句话，今天终于明白了，原来对于 linux 系统而言，连硬件都是文件。（无端联想 lisp 一切皆链表）</p><p>在终端输入命令</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span>df -h</span></span></code></pre></div><p>输出</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span>文件系统        容量  已用  可用 已用% 挂载点</span></span>
<span class="line"><span>udev            3.7G     0  3.7G    0% /dev</span></span>
<span class="line"><span>tmpfs           767M  3.3M  764M    1% /run</span></span>
<span class="line"><span>/dev/nvme0n1p5   16G  8.8G  6.1G   60% /</span></span>
<span class="line"><span>tmpfs           3.8G  170M  3.6G    5% /dev/shm</span></span>
<span class="line"><span>tmpfs           5.0M  4.0K  5.0M    1% /run/lock</span></span>
<span class="line"><span>tmpfs           4.0M     0  4.0M    0% /sys/fs/cgroup</span></span>
<span class="line"><span>/dev/nvme0n1p6   76G  2.2G   70G    3% /data</span></span>
<span class="line"><span>/dev/nvme0n1p2  1.5G  121M  1.3G    9% /boot</span></span>
<span class="line"><span>/dev/nvme0n1p4   16G  7.2G  7.7G   49% /recovery</span></span>
<span class="line"><span>/dev/sda1       916G  2.8G  867G    1% /home</span></span>
<span class="line"><span>tmpfs           767M   92K  767M    1% /run/user/1000</span></span></code></pre></div><p>可以看见文件系统一列就是一些硬件的名称：其中出现最多的前缀<code>/dev/</code>表示 device 即设备。往后最主要出现的是 nvme0n1p[1-6] 其中 nvme 是一种固态硬盘技术，0 指该硬盘的主控芯片，n1 是主存储器，p[1-6] 是它的六个分区。 之后四列意思明显。而挂载点就是文件系统对应的入口，即此入口下所有文件都存放在挂载点对应的文件系统中。譬如根目录<code>/</code>下所有文件都存放在<code>/dev/nvme0n1p5</code>。这一点可以类比某 win 的盘符 CDEF。</p><h2 id="常见挂载点" tabindex="-1">常见挂载点 <a class="header-anchor" href="#常见挂载点" aria-label="Permalink to &quot;常见挂载点&quot;">​</a></h2><p>搞清楚常见挂载点是为了合理安排系统分区。所谓分区，就是将系统的不同功能对应到硬件的不同物理位置。物理上不同分区互相隔离，确保系统的部分功能失效时，不至于影响其他功能。譬如将系统的启动目录<code>/boot</code>与根目录<code>/</code>隔离开，即使根目录出问题，系统也能正常启动。</p><blockquote><p>有人可能疑惑，<code>/boot</code>不应该是<code>/</code>的子目录吗？为什么能够和根目录隔离开呢？这就是 linux 挂载的自由性了。挂载点是可以精确到一个具体目录的，尽管逻辑上二者是上下级关系，但物理上是互不包含的</p></blockquote><h4 id="根" tabindex="-1">/ （根） <a class="header-anchor" href="#根" aria-label="Permalink to &quot;/ （根）&quot;">​</a></h4><p>我们知道<code>/</code>是 linux 目录的分隔符，如果只有一根<code>/</code>单独存在，它指的就是（根）目录。逻辑上它是所有目录的上级，根目录没有上级。（指令<code>cd ..</code>的收敛点与不动点）</p><p>根目录是安装 linux 系统唯一必须挂载的目录。其余目录为了系统的稳定、管理、维护方便，建议单独安排分区挂载。</p><blockquote><p>注意不要将根目录<code>/</code>与根用户目录<code>/root</code>搞混</p></blockquote><h4 id="boot" tabindex="-1">/boot <a class="header-anchor" href="#boot" aria-label="Permalink to &quot;/boot&quot;">​</a></h4><p>linux 内核启动所需文件目录，大小约为 100M。建议单独挂载。</p><h4 id="home" tabindex="-1">/home <a class="header-anchor" href="#home" aria-label="Permalink to &quot;/home&quot;">​</a></h4><p>用于存储用户自己创建文件的目录。<code>/home</code>是所有用户目录的总和，譬如在我的系统中<code>ls /home</code>返回</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span>alephpi  lost+found  timeshift</span></span></code></pre></div><p>可以看到这个目录中只有一个用户目录<code>/alephpi</code>。特别的，对于当前用户而言，他的用户目录在命令行的别名（alias）是<code>~</code>。譬如对于我（alephpi）而言，<code>~</code>就等于<code>/home/alephpi</code></p><h4 id="swap" tabindex="-1">swap <a class="header-anchor" href="#swap" aria-label="Permalink to &quot;swap&quot;">​</a></h4><p>交换分区，或者说虚拟内存。一般设置为物理内存大小，物理内存过小可以多分配，若足够大可以不分配。</p><h4 id="efi" tabindex="-1">efi <a class="header-anchor" href="#efi" aria-label="Permalink to &quot;efi&quot;">​</a></h4><p>efi 分区，用于以 UEFI 方式启动系统。一般 300M。</p><p>以下为常见目录，通常不必单独挂载，如有自定义需求，可以参考 <a href="https://www.beizigen.com/post/deepin-depth-system-manual-zoning-details.html" target="_blank" rel="noreferrer">此文章</a> 的挂载方式</p><h4 id="usr" tabindex="-1">/usr <a class="header-anchor" href="#usr" aria-label="Permalink to &quot;/usr&quot;">​</a></h4><p>应用程序所在目录</p><h4 id="var" tabindex="-1">/var <a class="header-anchor" href="#var" aria-label="Permalink to &quot;/var&quot;">​</a></h4><p>指 variable，用于存放经常变动的文件，譬如日志、缓存。</p><h4 id="etc" tabindex="-1">/etc <a class="header-anchor" href="#etc" aria-label="Permalink to &quot;/etc&quot;">​</a></h4><p>存放各种配置文件的目录。</p><h4 id="tmp" tabindex="-1">/tmp <a class="header-anchor" href="#tmp" aria-label="Permalink to &quot;/tmp&quot;">​</a></h4><p>用于存放临时文件，因 linux 临时垃圾很少，可不单独挂载。</p><h4 id="opt" tabindex="-1">/opt <a class="header-anchor" href="#opt" aria-label="Permalink to &quot;/opt&quot;">​</a></h4><p>指 optional， 某些应用程序会安装至此。</p><h2 id="filesystem-hierarchy-standard" tabindex="-1">Filesystem Hierarchy Standard <a class="header-anchor" href="#filesystem-hierarchy-standard" aria-label="Permalink to &quot;Filesystem Hierarchy Standard&quot;">​</a></h2><p>以上是磁盘分区时常见的文件目录。趁此机会我们不妨全面了解一下 linux 下的文件系统层级标准。下表摘取于英文 <a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard" target="_blank" rel="noreferrer">wiki</a> 并作了删减。</p><table tabindex="0"><thead><tr><th>Directory</th><th>Description</th></tr></thead><tbody><tr><td><code>/</code></td><td><em>Primary hierarchy</em> root and <a href="https://en.wikipedia.org/wiki/Root_directory" title="Root directory" target="_blank" rel="noreferrer">root directory</a> of the entire file system hierarchy.</td></tr><tr><td><code>/bin</code></td><td>Essential command <a href="https://en.wikipedia.org/wiki/Executable" title="Executable" target="_blank" rel="noreferrer">binaries</a> that need to be available in <a href="https://en.wikipedia.org/wiki/Single-user_mode" title="Single-user mode" target="_blank" rel="noreferrer">single-user mode</a>, including to bring up the system or repair it,<sup id="cite_ref-3"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-3">[3]</a></sup> for all users (e.g., <a href="https://en.wikipedia.org/wiki/Cat_(Unix)" title="Cat (Unix)" target="_blank" rel="noreferrer">cat</a>, <a href="https://en.wikipedia.org/wiki/Ls" title="Ls" target="_blank" rel="noreferrer">ls</a>, <a href="https://en.wikipedia.org/wiki/Cp_(Unix)" title="Cp (Unix)" target="_blank" rel="noreferrer">cp</a>).</td></tr><tr><td><code>/boot</code></td><td><a href="https://en.wikipedia.org/wiki/Boot_loader" title="Boot loader" target="_blank" rel="noreferrer">Boot loader</a> files (e.g., <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)" title="Kernel (operating system)" target="_blank" rel="noreferrer">kernels</a>, <a href="https://en.wikipedia.org/wiki/Initrd" title="Initrd" target="_blank" rel="noreferrer">initrd</a>).</td></tr><tr><td><code>/dev</code></td><td><a href="https://en.wikipedia.org/wiki/Device_file" target="_blank" rel="noreferrer">Device files</a> (e.g., <a href="https://en.wikipedia.org/wiki/Null_device" target="_blank" rel="noreferrer">/dev/null</a>, <code>/dev/disk0</code>, <code>/dev/sda1</code>, <code>/dev/tty</code>, <a href="https://en.wikipedia.org/wiki//dev/random" target="_blank" rel="noreferrer">/dev/random</a>).</td></tr><tr><td><code>/etc</code></td><td>Host-specific system-wide <a href="https://en.wikipedia.org/wiki/Configuration_file" title="Configuration file" target="_blank" rel="noreferrer">configuration files</a>.There has been controversy over the meaning of the name itself. In early versions of the UNIX Implementation Document from Bell labs, <code>/etc</code> is referred to as the <em><a href="https://en.wikipedia.org/wiki/Et_cetera" title="Et cetera" target="_blank" rel="noreferrer">etcetera</a> directory</em>,<sup id="cite_ref-4"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-4">[4]</a></sup> as this directory historically held everything that did not belong elsewhere (however, the FHS restricts <code>/etc</code> to static configuration files and may not contain binaries).<sup id="cite_ref-/etc_5-0"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-/etc-5">[5]</a></sup> Since the publication of early documentation, the directory name has been re-explained in various ways. Recent interpretations include <a href="https://en.wikipedia.org/wiki/Backronym" title="Backronym" target="_blank" rel="noreferrer">backronyms</a> such as &quot;Editable Text Configuration&quot; or &quot;Extended Tool Chest&quot;.<sup id="cite_ref-6"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-6">[6]</a></sup></td></tr><tr><td><code>/etc/opt</code></td><td>Configuration files for add-on packages stored in <code>/opt</code>.</td></tr><tr><td><code>/etc/sgml</code></td><td>Configuration files, such as catalogs, for software that processes <a href="https://en.wikipedia.org/wiki/SGML" title="SGML" target="_blank" rel="noreferrer">SGML</a>.</td></tr><tr><td><code>/etc/X11</code></td><td>Configuration files for the <a href="https://en.wikipedia.org/wiki/X_Window_System" title="X Window System" target="_blank" rel="noreferrer">X Window System</a>, version 11.</td></tr><tr><td><code>/etc/xml</code></td><td>Configuration files, such as catalogs, for software that processes <a href="https://en.wikipedia.org/wiki/XML" title="XML" target="_blank" rel="noreferrer">XML</a>.</td></tr><tr><td><code>/home</code></td><td>Users&#39; <a href="https://en.wikipedia.org/wiki/Home_directory" title="Home directory" target="_blank" rel="noreferrer">home directories</a>, containing saved files, personal settings, etc.</td></tr><tr><td><code>/lib</code></td><td><a href="https://en.wikipedia.org/wiki/Library_(computer_science)" title="Library (computer science)" target="_blank" rel="noreferrer">Libraries</a> essential for the <a href="https://en.wikipedia.org/wiki/Binaries" title="Binaries" target="_blank" rel="noreferrer">binaries</a> in <code>/bin</code> and <code>/sbin</code>.</td></tr><tr><td><code>/lib&lt;qual&gt;</code></td><td>Alternate format essential libraries. These are typically used on systems that support more than one executable code format, such as systems supporting <a href="https://en.wikipedia.org/wiki/32-bit" title="32-bit" target="_blank" rel="noreferrer">32-bit</a> and <a href="https://en.wikipedia.org/wiki/64-bit" title="64-bit" target="_blank" rel="noreferrer">64-bit</a> versions of an <a href="https://en.wikipedia.org/wiki/Instruction_set" title="Instruction set" target="_blank" rel="noreferrer">instruction set</a>. Such directories are optional, but if they exist, they have some requirements.</td></tr><tr><td><code>/media</code></td><td>Mount points for <a href="https://en.wikipedia.org/wiki/Removable_media" title="Removable media" target="_blank" rel="noreferrer">removable media</a> such as <a href="https://en.wikipedia.org/wiki/CD-ROM" title="CD-ROM" target="_blank" rel="noreferrer">CD-ROMs</a> (appeared in FHS-2.3 in 2004).</td></tr><tr><td><code>/mnt</code></td><td>Temporarily <a href="https://en.wikipedia.org/wiki/Mount_(computing)" title="Mount (computing)" target="_blank" rel="noreferrer">mounted</a> filesystems.</td></tr><tr><td><code>/opt</code></td><td>Add-on <a href="https://en.wikipedia.org/wiki/Application_software" title="Application software" target="_blank" rel="noreferrer">application software</a> <a href="https://en.wikipedia.org/wiki/Software_package_(installation)" title="Software package (installation)" target="_blank" rel="noreferrer">packages</a>.<sup id="cite_ref-/opt_7-0"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-/opt-7">[7]</a></sup></td></tr><tr><td><code>/proc</code></td><td>Virtual <a href="https://en.wikipedia.org/wiki/File_system" title="File system" target="_blank" rel="noreferrer">filesystem</a> providing <a href="https://en.wikipedia.org/wiki/Process_(computing)" title="Process (computing)" target="_blank" rel="noreferrer">process</a> and <a href="https://en.wikipedia.org/wiki/Kernel_(operating_system)" title="Kernel (operating system)" target="_blank" rel="noreferrer">kernel</a> information as files. In Linux, corresponds to a <a href="https://en.wikipedia.org/wiki/Procfs" title="Procfs" target="_blank" rel="noreferrer">procfs</a> mount. Generally, automatically generated and populated by the system, on the fly.</td></tr><tr><td><code>/root</code></td><td><a href="https://en.wikipedia.org/wiki/Home_directory" title="Home directory" target="_blank" rel="noreferrer">Home directory</a> for the <a href="https://en.wikipedia.org/wiki/Superuser" title="Superuser" target="_blank" rel="noreferrer">root</a> user.</td></tr><tr><td><code>/run</code></td><td>Run-time variable data: Information about the running system since last boot, e.g., currently logged-in users and running <a href="https://en.wikipedia.org/wiki/Daemon_(computer_software)" title="Daemon (computer software)" target="_blank" rel="noreferrer">daemons</a>. Files under this directory must be either removed or truncated at the beginning of the boot process, but this is not necessary on systems that provide this directory as a <a href="https://en.wikipedia.org/wiki/Temporary_filesystem" title="Temporary filesystem" target="_blank" rel="noreferrer">temporary filesystem</a> (<a href="https://en.wikipedia.org/wiki/Tmpfs" title="Tmpfs" target="_blank" rel="noreferrer">tmpfs</a>).</td></tr><tr><td><code>/sbin</code></td><td>Essential system binaries (e.g., <a href="https://en.wikipedia.org/wiki/Fsck" title="Fsck" target="_blank" rel="noreferrer">fsck</a>, <a href="https://en.wikipedia.org/wiki/Init" title="Init" target="_blank" rel="noreferrer">init</a>, <a href="https://en.wikipedia.org/wiki/Route_(command)" title="Route (command)" target="_blank" rel="noreferrer">route</a>).</td></tr><tr><td><code>/srv</code></td><td>Site-specific data served by this system, such as data and scripts for web servers, data offered by <a href="https://en.wikipedia.org/wiki/FTP" title="FTP" target="_blank" rel="noreferrer">FTP</a> servers, and repositories for <a href="https://en.wikipedia.org/wiki/Version_control_systems" title="Version control systems" target="_blank" rel="noreferrer">version control systems</a> (appeared in FHS-2.3 in 2004).</td></tr><tr><td><code>/sys</code></td><td>Contains information about devices, drivers, and some kernel features.<sup id="cite_ref-/sys_8-0"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-/sys-8">[8]</a></sup></td></tr><tr><td><code>/tmp</code></td><td><a href="https://en.wikipedia.org/wiki/Temporary_folder" title="Temporary folder" target="_blank" rel="noreferrer">Directory for temporary files</a> (see also <code>/var/tmp</code>). Often not preserved between system reboots and may be severely size-restricted.</td></tr><tr><td><code>/usr</code></td><td><em>Secondary hierarchy</em> for read-only user data; contains the majority of (<a href="https://en.wikipedia.org/wiki/Multi-user" title="Multi-user" target="_blank" rel="noreferrer">multi-</a>)user utilities and applications. Should be shareable and read-only.<sup id="cite_ref-9"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-9">[9]</a></sup><sup id="cite_ref-10"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-10">[10]</a></sup></td></tr><tr><td><code>/usr/bin</code></td><td>Non-essential command <a href="https://en.wikipedia.org/wiki/Executable" title="Executable" target="_blank" rel="noreferrer">binaries</a> (not needed in <a href="https://en.wikipedia.org/wiki/Single-user_mode" title="Single-user mode" target="_blank" rel="noreferrer">single-user mode</a>); for all users.</td></tr><tr><td><code>/usr/include</code></td><td>Standard <a href="https://en.wikipedia.org/wiki/Header_file" title="Header file" target="_blank" rel="noreferrer">include files</a>.</td></tr><tr><td><code>/usr/lib</code></td><td><a href="https://en.wikipedia.org/wiki/Library_(computer_science)" title="Library (computer science)" target="_blank" rel="noreferrer">Libraries</a> for the <a href="https://en.wikipedia.org/wiki/Binaries" title="Binaries" target="_blank" rel="noreferrer">binaries</a> in <code>/usr/bin</code> and <code>/usr/sbin</code>.</td></tr><tr><td><code>/usr/libexec</code></td><td>Binaries run by other programs that are not intended to be executed directly by users or shell scripts (optional).</td></tr><tr><td><code>/usr/lib&lt;qual&gt;</code></td><td>Alternative-format libraries (e.g., <code>/usr/lib32</code> for 32-bit libraries on a 64-bit machine (optional)).</td></tr><tr><td><code>/usr/local</code></td><td><em>Tertiary hierarchy</em> for local data, specific to this host. Typically has further subdirectories (e.g., <code>bin</code>, <code>lib</code>, <code>share</code>).<sup id="cite_ref-11"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-11">[NB 1]</a></sup></td></tr><tr><td><code>/usr/sbin</code></td><td>Non-essential system binaries (e.g., <a href="https://en.wikipedia.org/wiki/Daemon_(computer_software)" title="Daemon (computer software)" target="_blank" rel="noreferrer">daemons</a> for various <a href="https://en.wikipedia.org/wiki/Network_service" title="Network service" target="_blank" rel="noreferrer">network services</a>).</td></tr><tr><td><code>/usr/share</code></td><td>Architecture-independent (shared) data.</td></tr><tr><td><code>/usr/src</code></td><td><a href="https://en.wikipedia.org/wiki/Source_code" title="Source code" target="_blank" rel="noreferrer">Source code</a> (e.g., the kernel source code with its header files).</td></tr><tr><td><code>/usr/X11R6</code></td><td><a href="https://en.wikipedia.org/wiki/X_Window_System" title="X Window System" target="_blank" rel="noreferrer">X Window System</a>, Version 11, Release 6 (up to FHS-2.3, optional).</td></tr><tr><td><code>/var</code></td><td>Variable files: files whose content is expected to continually change during normal operation of the system, such as logs, spool files, and temporary e-mail files.</td></tr><tr><td><code>/var/cache</code></td><td>Application cache data. Such data are locally generated as a result of time-consuming I/O or calculation. The application must be able to regenerate or restore the data. The cached files can be deleted without loss of data.</td></tr><tr><td><code>/var/lib</code></td><td>State information. Persistent data modified by programs as they run (e.g., databases, packaging system metadata, etc.).</td></tr><tr><td><code>/var/lock</code></td><td>Lock files. Files keeping track of resources currently in use.</td></tr><tr><td><code>/var/log</code></td><td>Log files. Various logs.</td></tr><tr><td><code>/var/mail</code></td><td>Mailbox files. In some distributions, these files may be located in the deprecated <code>/var/spool/mail</code>.</td></tr><tr><td><code>/var/opt</code></td><td>Variable data from add-on packages that are stored in <code>/opt</code>.</td></tr><tr><td><code>/var/run</code></td><td>Run-time variable data. This directory contains system information data describing the system since it was booted.<sup id="cite_ref-12"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-12">[11]</a></sup> In FHS 3.0, <code>/var/run</code> is replaced by <code>/run</code>; a system should either continue to provide a <code>/var/run</code> directory or provide a symbolic link from <code>/var/run</code> to <code>/run</code> for backwards compatibility.<sup id="cite_ref-13"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-13">[12]</a></sup></td></tr><tr><td><code>/var/spool</code></td><td><a href="https://en.wikipedia.org/wiki/Spooling" title="Spooling" target="_blank" rel="noreferrer">Spool</a> for tasks waiting to be processed (e.g., print queues and outgoing mail queue).</td></tr><tr><td><code>/var/spool/mail</code></td><td><a href="https://en.wikipedia.org/wiki/Deprecated" title="Deprecated" target="_blank" rel="noreferrer">Deprecated</a> location for users&#39; mailboxes.<sup id="cite_ref-14"><a href="https://en.wikipedia.org/wiki/Filesystem_Hierarchy_Standard##cite_note-14">[13]</a></sup></td></tr><tr><td><code>/var/tmp</code></td><td>Temporary files to be preserved between reboots.</td></tr></tbody></table>`,38)]))}const u=t(o,[["render",d]]);export{f as __pageData,u as default};
