import{j as P,e as G,q as H,g as Y,a as R}from"./chunks/theme.DK6QFBAT.js";import{v as C,P as Q,u as J,a2 as N,a3 as X,a4 as Z,f as _,q as O,s as K,p as E,d as T,i as ee,a6 as te,ar as ne,y as fe,Y as oe,o as k,c as L,g as S,B as ae,G as M,w as A,b as se,as as ie,F as re,_ as ce}from"./chunks/framework.CCxIPCIe.js";function W(e){return X()?(Z(e),!0):!1}function I(e){return typeof e=="function"?e():J(e)}const le=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const ue=Object.prototype.toString,de=e=>ue.call(e)==="[object Object]",pe=()=>{};function he(e){return N()}function me(e,n=!0,t){he()?C(e,t):n?e():Q(e)}function ge(e){var n;const t=I(e);return(n=t?.$el)!=null?n:t}const j=le?window:void 0;function be(...e){let n,t,o,a;if(typeof e[0]=="string"||Array.isArray(e[0])?([t,o,a]=e,n=j):[n,t,o,a]=e,!n)return pe;Array.isArray(t)||(t=[t]),Array.isArray(o)||(o=[o]);const l=[],r=()=>{l.forEach(p=>p()),l.length=0},u=(p,i,f,s)=>(p.addEventListener(i,f,s),()=>p.removeEventListener(i,f,s)),d=O(()=>[ge(n),I(a)],([p,i])=>{if(r(),!p)return;const f=de(i)?{...i}:i;l.push(...t.flatMap(s=>o.map(c=>u(p,s,c,f))))},{immediate:!0,flush:"post"}),m=()=>{d(),r()};return W(m),m}function we(){const e=_(!1),n=N();return n&&C(()=>{e.value=!0},n),e}function ve(e){const n=we();return E(()=>(n.value,!!e()))}function ye(e,n={}){const{window:t=j}=n,o=ve(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let a;const l=_(!1),r=m=>{l.value=m.matches},u=()=>{a&&("removeEventListener"in a?a.removeEventListener("change",r):a.removeListener(r))},d=K(()=>{o.value&&(u(),a=t.matchMedia(I(e)),"addEventListener"in a?a.addEventListener("change",r):a.addListener(r),l.value=a.matches)});return W(()=>{d(),u(),a=void 0}),l}function _e(e={}){const{window:n=j,initialWidth:t=Number.POSITIVE_INFINITY,initialHeight:o=Number.POSITIVE_INFINITY,listenOrientation:a=!0,includeScrollbar:l=!0}=e,r=_(t),u=_(o),d=()=>{n&&(l?(r.value=n.innerWidth,u.value=n.innerHeight):(r.value=n.document.documentElement.clientWidth,u.value=n.document.documentElement.clientHeight))};if(d(),me(d),be("resize",d,{passive:!0}),a){const m=ye("(orientation: portrait)");O(m,()=>d())}return{width:r,height:u}}const xe={equatorial:[0,0,0],ecliptic:[0,0,23.4393]};function Se(e){if(e===null||e.length<=0)return[0,0,0];const n=xe.equatorial;return e[2]||(e[2]=0),[n[0]-e[0],n[1]-e[1],n[2]+e[2]]}async function ke(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(t=>{e([t.coords.latitude,t.coords.longitude])},t=>{console.error(`Error: ${t.message}, fallback to [0,0]`),n([0,0])})}).catch(()=>[0,0])}async function Ee(){const e=await ke(),t=Me(new Date,e[1]),o=e[0];return[t,o]}function Me(e,n){let t=e.getUTCFullYear(),o=e.getUTCMonth()+1;const a=e.getUTCDate(),l=e.getUTCHours(),r=e.getUTCMinutes(),u=e.getUTCSeconds();(o===1||o===2)&&(t=t-1,o=o+12);const d=Math.floor(t/100),m=2-d+Math.floor(d/4),p=Math.floor(365.25*t),i=Math.floor(30.6001*(o+1)),f=m+p+i-730550.5+a+(l+r/60+u/3600)/24,s=f/36525;let c=280.46061837+360.98564736629*f+387933e-9*s*s-s*s*s/3871e4+n;if(c>0)for(;c>360;)c=c-360;else for(;c<0;)c=c+360;return c}const z=await P("https://raw.githubusercontent.com/alephpi/sky-wander/data/stars.6.tr.min.geojson"),Pe=await P("https://raw.githubusercontent.com/alephpi/sky-wander/data/constellations.tr.min.geojson"),Ce=await P("https://raw.githubusercontent.com/alephpi/sky-wander/data/constellations.lines.min.geojson"),Te=["#9bbcff","#9fbfff","#a4c2ff","#a9c5ff","#afc9ff","#b7ceff","#bfd3ff","#c9d9ff","#d3e0ff","#d7e2ff","#d9e3ff","#dce5ff","#dee6ff","#e0e7ff","#e3e9ff","#e6ebff","#e9edff","#ebeeff","#eff0ff","#f3f2ff","#f6f4ff","#f9f6ff","#fef9ff","#fff9fd","#fff6f8","#fff5f5","#fff4f2","#fff2ec","#fff0e9","#ffefe6","#ffece0","#ffebdc","#ffe9d9","#ffe8d5","#ffe4ce","#ffe3ca","#ffe1c6","#ffdfc2","#ffddbe","#ffdbba","#ffd9b6","#ffd7b1","#ffd5ad","#ffd3a8","#ffd1a3","#ffce9f","#ffcc99","#ffc994","#ffc892","#ffc78f","#ffc489","#ffc184","#ffbe7e","#ffbb78","#ffb975","#ffb872","#ffb46b","#ffb269","#ffb165","#ffad5e","#ffab5a","#ffa957","#ffa753","#ffa54f","#ffa34b","#ffa148","#ff9d3f","#ff9a3c","#ff9836","#ff9631","#ff932c","#ff9127","#ff8e21","#ff8b1a","#ff8912","#ff870a","#ff8506","#ff8300","#ff8100","#ff7e00","#ff7c00","#ff7a00","#ff7800","#ff7500","#ff7300","#ff7000","#ff6d00","#ff6b00","#ff6900","#ff6700","#ff6500","#ff6300","#ff6000","#ff5d00","#ff5b00","#ff5900","#ff5600","#ff5300","#ff4f00","#ff4b00","#ff4700"],Le=10,Ie=-.28;function D(e){return e===null?.1:Le*Math.exp(Ie*(e+2))}const je=G(z.features,e=>e.properties.bv),Be=H(je,Te),Re={class:"fixed top-0 bottom-0 left-0 right-0",style:{"z-index":"-10"}},Ae=T({__name:"Celestial",async setup(e){let n,t;const o=ee(),a=E(()=>o.isDark.value?"white":"black"),l=E(()=>o.isDark.value?"black":"seashell"),r=_(null),u=te(_e({includeScrollbar:!0})),d=([n,t]=ne(()=>Ee()),n=await n,t(),n);function m(i,f=400,s=400,c){const g=i.getContext("2d"),b=window.devicePixelRatio||1,w=g.webkitBackingStorePixelRatio||g.mozBackingStorePixelRatio||g.msBackingStorePixelRatio||g.oBackingStorePixelRatio||g.backingStorePixelRatio||1,v=b/w;return i.style.width=`${f}px`,i.style.height=`${s}px`,i.width=f*v,i.height=s*v,{ctx:g,dpi:v}}async function p(){const i=r.value,{ctx:f}=m(i,u.width,u.height),{width:s,height:c}=i,g=s/c,[b,w]=g>1?[30,30/g]:[30*g,30],v=[[-b,-w],[-b,w],[b,-w],[b,w]];f.font="20px QIJI",f.clearRect(0,0,s,c),f.fillStyle=l.value,f.fillRect(0,0,s,c);const q=Se(d),U=s/1024,B=Math.sqrt(U),x=Y().fitExtent([[0,0],[s,c]],{type:"MultiPoint",coordinates:v}).rotate(q).reflectX(!0),V=R(x,f).pointRadius(h=>Math.max(B*D(h.properties.mag),.1)),$=R(x,f);z.features.forEach(h=>{f.beginPath(),V(h),f.fillStyle=Be(h.properties.bv),f.fill();const y=x(h.geometry.coordinates),F=Math.max(B*D(h.properties.mag),.1);h.properties.name!==null&&(f.fillStyle=a.value,f.fillText(h.properties.name,y[0]-F,y[1]))}),f.beginPath(),$(Ce),f.strokeStyle=a.value,f.stroke(),Pe.features.forEach(h=>{f.beginPath();const y=x(h.geometry.coordinates);h.properties.name!==null&&f.fillText(h.properties.name,y[0],y[1])})}return C(()=>{window.addEventListener("beforeunload",()=>{p()})}),fe(()=>{p()}),oe(()=>{window.removeEventListener("beforeunload",()=>{p()})}),(i,f)=>(k(),L("div",Re,[S("canvas",{id:"celestial",ref_key:"el",ref:r,width:"400",height:"400",style:{display:"block"}},null,512)]))}}),De=T({__name:"TimeLine",setup(e){return(n,t)=>{const o=ae("client-only");return k(),L(re,null,[t[0]||(t[0]=S("div",{class:"vp-doc VPDoc","text-center":""},[S("h1",null,"时光")],-1)),t[1]||(t[1]=S("div",{"p-10":"","text-center":"","m-auto":""},"正在施工",-1)),M(o,null,{default:A(()=>[(k(),se(ie,null,{default:A(()=>[M(Ae)]),_:1}))]),_:1})],64)}}}),Ne=ce(De,[["__scopeId","data-v-457d9357"]]),qe=JSON.parse('{"title":"","description":"","frontmatter":{"layout":"page"},"headers":[],"relativePath":"timeline.md","filePath":"timeline.md"}'),Oe={name:"timeline.md"},Ue=T({...Oe,setup(e){return(n,t)=>(k(),L("div",null,[M(Ne)]))}});export{qe as __pageData,Ue as default};
