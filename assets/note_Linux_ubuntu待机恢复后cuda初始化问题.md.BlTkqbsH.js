import{_ as a,c as t,ap as n,o as s}from"./chunks/framework.CCxIPCIe.js";const _=JSON.parse('{"title":"ubuntu 待机恢复后 cuda 初始化问题","description":"","frontmatter":{"title":"ubuntu 待机恢复后 cuda 初始化问题","date":"2024-03-07T15:13:29.283Z","length":"169字","time":"1分钟","aside":true,"hash":2123075936},"headers":[],"relativePath":"note/Linux/ubuntu待机恢复后cuda初始化问题.md","filePath":"note/Linux/ubuntu待机恢复后cuda初始化问题.md"}'),i={name:"note/Linux/ubuntu待机恢复后cuda初始化问题.md"};function r(u,e,o,c,p,d){return s(),t("div",null,e[0]||(e[0]=[n(`<p>系统：ubuntu 22.04</p><p>今天在本机 gpu 上跑一个模型，然后待机（suspend）恢复后跑不了了。pytorch 报错</p><div class="danger custom-block"><p class="custom-block-title">UserWarning: CUDA initialization: CUDA unknown error - this may be due to an incorrectly set up environment, e.g. changing env variable CUDA_VISIBLE_DEVICES after program start. Setting the available devices to be zero. (Triggered internally at ../c10/cuda/CUDAFunctions.cpp:108.)</p></div><p>然后在 pytorch 论坛上找到 <a href="https://discuss.pytorch.org/t/userwarning-cuda-initialization-cuda-unknown-error-this-may-be-due-to-an-incorrectly-set-up-environment-e-g-changing-env-variable-cuda-visible-devices-after-program-start-setting-the-available-devices-to-be-zero/129335/5" target="_blank" rel="noreferrer">解答</a></p><p>结论是 ubuntu 的 suspend 模式和 nvidia 驱动间的问题。 命令行运行</p><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki solarized-dark vp-code" tabindex="0"><code><span class="line"><span>sudo rmmod nvidia_uvm</span></span>
<span class="line"><span>sudo modprobe nvidia_uvm</span></span></code></pre></div><p>重新加载 nvm 模块。 如果还不能解决，只能重启机器。</p>`,7)]))}const v=a(i,[["render",r]]);export{_ as __pageData,v as default};
